<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ba Khuong Cao - caobakhuongytcc@gmail.com">

<title>Phân tích mô tả sử dụng R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-1d4f84655f446305ac42a8f1abcf7405.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Descriptive statistics.html">Basics</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Day_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Descriptive statistics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
 <span class="menu-text">index.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">basics-knitr.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">basics-jupyter.qmd</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Layout</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
 <span class="menu-text">layout.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">layout-knitr.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">layout-jupyter.qmd</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">advanced.qmd</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
 <span class="menu-text">raw-code.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">custom-theme.qmd</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item">
 <span class="menu-text">acknowledgment.qmd</span>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#mô-tả-dataset" id="toc-mô-tả-dataset" class="nav-link active" data-scroll-target="#mô-tả-dataset">1. Mô tả dataset</a></li>
  <li><a href="#loading-packages" id="toc-loading-packages" class="nav-link" data-scroll-target="#loading-packages">2. Loading packages</a></li>
  <li><a href="#loading-dataset" id="toc-loading-dataset" class="nav-link" data-scroll-target="#loading-dataset">3. Loading dataset</a></li>
  <li><a href="#biến-đổimã-hóa-dữ-liệu" id="toc-biến-đổimã-hóa-dữ-liệu" class="nav-link" data-scroll-target="#biến-đổimã-hóa-dữ-liệu">4. Biến đổi/Mã hóa dữ liệu</a>
  <ul class="collapse">
  <li><a href="#chuyển-một-số-biến-sang-dạng-factor" id="toc-chuyển-một-số-biến-sang-dạng-factor" class="nav-link" data-scroll-target="#chuyển-một-số-biến-sang-dạng-factor">Chuyển một số biến sang dạng <code>factor</code></a></li>
  <li><a href="#gán-nhãn-giá-trị" id="toc-gán-nhãn-giá-trị" class="nav-link" data-scroll-target="#gán-nhãn-giá-trị">Gán nhãn giá trị</a></li>
  </ul></li>
  <li><a href="#phân-tích-kết-quả-và-xuất-file" id="toc-phân-tích-kết-quả-và-xuất-file" class="nav-link" data-scroll-target="#phân-tích-kết-quả-và-xuất-file">5. Phân tích kết quả và xuất file</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Phân tích mô tả sử dụng R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ba Khuong Cao - caobakhuongytcc@gmail.com </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Ưu điểm
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><strong>Hạn chế sai sót</strong>, <strong>tiết kiệm thời gian/công sức</strong> bằng cách xuất trực tiếp bảng kết quả đưa vào bài báo/luận văn</p></li>
<li><p><strong>Không điền thủ công</strong>: Không cần phải phân tích cho từng biến số và chuyển kết quả vào bảng một cách thủ công.</p></li>
</ul>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Các bước thực hiện
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Làm quen với dataset (Mô tả ngắn gọn)</li>
<li>Loading packages</li>
<li>Loading dataset</li>
<li>Thực hiện một số bước cần thiết để mã hóa dữ liệu</li>
<li>Phân tích kết quả và xuất ra file Word (.docX)</li>
</ol>
</div>
</div>
<section id="mô-tả-dataset" class="level1">
<h1>1. Mô tả dataset</h1>
<p>Trong phần phân tích ngày hôm nay, chúng ta sẽ sử dụng bộ số liệu được public trên tạp chí (<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0197251">Link</a>) về nhiễm HIV ở phụ nữ có hoạt động mại dâm.Các datasets liên quan đến bài báo này được công bố kèm theo bài báo này. Phần phân tích này sử dụng dataset có tên <code>data_file_Table_1.csv</code>. Phần mô tả cụ thể của dataset này như sau (Theo công bố trong bài báo):</p>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 39%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Variable name (Tên biến)</th>
<th>Variable description (Mô tả)</th>
<th>Codes (Mã hóa)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>unique</td>
<td>Subject identification number</td>
<td>Numeric</td>
</tr>
<tr class="even">
<td>q103</td>
<td>Nationality</td>
<td>1 = Benin, 2 = Ghana, 3 = Nigeria, 4 = Togo, 5 = Others</td>
</tr>
<tr class="odd">
<td>age</td>
<td>Age in years</td>
<td>Numeric</td>
</tr>
<tr class="even">
<td>age_3cat</td>
<td>Age in years (categories)</td>
<td>1 = 18–24; 2 = 25–34; 3 = ≥ 35</td>
</tr>
<tr class="odd">
<td>q105</td>
<td>Education</td>
<td>0 = Not educated; 1 = Primary; 2 = Secondary; 3 = Postsecondary, university</td>
</tr>
<tr class="even">
<td>q114</td>
<td>Marital status</td>
<td>1 = Married; 2 = Single; 3 = Divorced; 4 = Widowed</td>
</tr>
<tr class="odd">
<td>q107</td>
<td>Place of work</td>
<td>1 = Brothel; 2 = Home; 3 = Bars; 4 = Hotels; 5 = Street; 6 = Nightclub; 7 = Others</td>
</tr>
<tr class="even">
<td>duree</td>
<td>Duration in sex work (months)</td>
<td>Numeric</td>
</tr>
<tr class="odd">
<td>q205</td>
<td>Number of clients (last 7 days of work)</td>
<td>Numeric</td>
</tr>
<tr class="even">
<td>q219</td>
<td>Number of sexual intercourses (last 3 days)</td>
<td>Numeric</td>
</tr>
<tr class="odd">
<td>constante</td>
<td>Consistent condom use with clients (last 7 days of work)</td>
<td>1 = Yes; 2 = No</td>
</tr>
<tr class="even">
<td>q211</td>
<td>Condom use with last client</td>
<td>1 = Yes; 2 = No</td>
</tr>
<tr class="odd">
<td>groupe</td>
<td>HIV/treatment status</td>
<td>1 = HIV positive, treated; 2 = HIV positive, not treated; 3 = HIV negative</td>
</tr>
<tr class="even">
<td>anal</td>
<td>Ever had anal sex (any partner)</td>
<td>1 = No; 2 = Yes</td>
</tr>
<tr class="odd">
<td>hla9</td>
<td>Ever had oral sex (any partner)</td>
<td>1 = Yes; 2 = No</td>
</tr>
<tr class="even">
<td>gono</td>
<td>NG prevalence</td>
<td>1 = Positive; 2 = Negative; 9 = No answer</td>
</tr>
<tr class="odd">
<td>chlam</td>
<td>CT prevalence</td>
<td>1 = Positive; 2 = Negative; 9 = No answer</td>
</tr>
<tr class="even">
<td>gonochlam</td>
<td>NG/CT prevalence</td>
<td>1 = Positive; 2 = Negative; 9 = No answer</td>
</tr>
<tr class="odd">
<td>cd4_nb</td>
<td>CD4 cell count/mm³</td>
<td>Numeric</td>
</tr>
<tr class="even">
<td>charge_virale_copies</td>
<td>Viral load</td>
<td>Numeric</td>
</tr>
</tbody>
</table>
</section>
<section id="loading-packages" class="level1">
<h1>2. Loading packages</h1>
<p>Chúng ta sẽ sử dụng một vài packages: <code>gmodels</code>, <code>dplyr</code>, <code>psych</code>, <code>gtsummary</code>, <code>readxl</code>, <code>readr</code>, <code>finalfit</code>, <code>flextable</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check whether pacman is available and install if needed</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">CRAN =</span> <span class="st">"https://cloud.r-project.org"</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"pacman"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Use pacman to install (if needed) and load the required packages</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(gmodels, dplyr, psych, gtsummary, readxl,readr,finalfit,flextable)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="loading-dataset" class="level1">
<h1>3. Loading dataset</h1>
<p>Chúng ta có thể load dataset này vào R để phân tích:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read CSV </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>hiv_tab_1_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(data_folder, <span class="st">"data_file_Table_1.csv"</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect the structure of the dataset</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(hiv_tab_1_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [319 × 20] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ unique              : chr [1:319] "D001T" "D002T" "D003T" "D004T" ...
 $ q103                : num [1:319] 2 1 4 2 4 2 2 3 1 4 ...
 $ age                 : num [1:319] 47 51 42 44 49 45 51 25 44 44 ...
 $ age_3cat            : num [1:319] 3 3 3 3 3 3 3 2 3 3 ...
 $ q105                : num [1:319] 1 1 0 1 0 1 0 1 0 1 ...
 $ q114                : num [1:319] 3 3 2 4 3 2 2 2 2 2 ...
 $ q107                : num [1:319] 5 5 1 1 5 1 1 1 2 1 ...
 $ duree               : num [1:319] 48 180 60 36 24 60 180 72 48 120 ...
 $ q205                : num [1:319] 19 32 72 35 54 11 27 13 1 19 ...
 $ q219                : num [1:319] 12 14 38 14 28 9 13 9 0 13 ...
 $ constante           : num [1:319] 1 2 1 1 1 2 1 1 1 1 ...
 $ q211                : num [1:319] 1 1 1 1 1 1 1 1 1 1 ...
 $ groupe              : num [1:319] 1 1 1 1 1 1 1 1 1 1 ...
 $ anal                : num [1:319] 1 1 1 1 1 1 1 1 1 1 ...
 $ hla9                : num [1:319] 2 2 2 2 2 2 2 2 2 2 ...
 $ gono                : num [1:319] 1 2 2 1 2 2 2 2 2 2 ...
 $ chlam               : num [1:319] 2 2 2 2 2 2 2 2 2 2 ...
 $ gonochlam           : num [1:319] 1 2 2 1 2 2 2 2 2 2 ...
 $ cd4_nb              : num [1:319] 219 297 191 464 525 145 263 710 734 280 ...
 $ charge_virale_copies: num [1:319] 50 50 1683 848 50 ...
 - attr(*, "spec")=
  .. cols(
  ..   unique = col_character(),
  ..   q103 = col_double(),
  ..   age = col_double(),
  ..   age_3cat = col_double(),
  ..   q105 = col_double(),
  ..   q114 = col_double(),
  ..   q107 = col_double(),
  ..   duree = col_double(),
  ..   q205 = col_double(),
  ..   q219 = col_double(),
  ..   constante = col_double(),
  ..   q211 = col_double(),
  ..   groupe = col_double(),
  ..   anal = col_double(),
  ..   hla9 = col_double(),
  ..   gono = col_double(),
  ..   chlam = col_double(),
  ..   gonochlam = col_double(),
  ..   cd4_nb = col_double(),
  ..   charge_virale_copies = col_double()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Notes
</div>
</div>
<div class="callout-body-container callout-body">
<p>Hầu hết tất cả các biến trong <code>dataset</code> này đều là dạng <code>num</code>(<code>numeric</code>), trừ biến <code>unique</code>. Như vậy để phù hợp với dạng dữ liệu được mô tả theo bảng ở trên (theo bài báo công bố), một số biến sẽ cần biến đổi thành <code>factor</code>(Biến phân loại/nhị phân)</p>
</div>
</div>
</section>
<section id="biến-đổimã-hóa-dữ-liệu" class="level1">
<h1>4. Biến đổi/Mã hóa dữ liệu</h1>
<section id="chuyển-một-số-biến-sang-dạng-factor" class="level3">
<h3 class="anchored" data-anchor-id="chuyển-một-số-biến-sang-dạng-factor">Chuyển một số biến sang dạng <code>factor</code></h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to factors ----</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>factor_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"q103"</span>, <span class="st">"age_3cat"</span>, <span class="st">"q105"</span>, <span class="st">"q114"</span>, <span class="st">"q107"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"constante"</span>, <span class="st">"q211"</span>, <span class="st">"groupe"</span>, <span class="st">"anal"</span>, <span class="st">"hla9"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gono"</span>, <span class="st">"chlam"</span>, <span class="st">"gonochlam"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>hiv_tab_1_data[factor_vars] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(hiv_tab_1_data[factor_vars], as.factor)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="gán-nhãn-giá-trị" class="level3">
<h3 class="anchored" data-anchor-id="gán-nhãn-giá-trị">Gán nhãn giá trị</h3>
<p>Gán nhãn giá trị cho các biến (theo bảng mô tả các biến ở trên)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Labeling for values of variables ----</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>q103)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Benin"</span>,<span class="st">"Ghana"</span>,<span class="st">"Nigeria"</span>, <span class="st">"Togo"</span>, <span class="st">"Others"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>age_3cat)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"18 - 24"</span>,<span class="st">"25 - 34"</span>,<span class="st">"&gt;=35"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>q105)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Not educated"</span>,<span class="st">"Primary"</span>,<span class="st">"Secondary"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Postsecondary, university"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>q114)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Married"</span>,<span class="st">"Single"</span>,<span class="st">"Divorced"</span>, <span class="st">"Widowed"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>q107)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Brothel"</span>,<span class="st">"Home"</span>,<span class="st">"Bars"</span>, <span class="st">"Hotels"</span>,<span class="st">"Street"</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Nightclub"</span>,<span class="st">"Others"</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>constante)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>q211)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>groupe)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"HIV positive, treated"</span>,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"HIV positive, not treated"</span>, <span class="st">"HIV negative"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>anal)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"No"</span>,<span class="st">"Yes"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>hla9)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>gono)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Positive"</span>,<span class="st">"Negative"</span>, <span class="st">"No answer"</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>chlam)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Positive"</span>,<span class="st">"Negative"</span>, <span class="st">"No answer"</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(hiv_tab_1_data<span class="sc">$</span>gonochlam)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Positive"</span>,<span class="st">"Negative"</span>, <span class="st">"No answer"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="phân-tích-kết-quả-và-xuất-file" class="level1">
<h1>5. Phân tích kết quả và xuất file</h1>
<p>Để có bảng kết quả (Bảng 1) như trong bài báo đã công bố, chúng ta thực hiện như sau:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Table 1. Baseline characteristics  ----</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>des_table1 <span class="ot">&lt;-</span> hiv_tab_1_data <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">include =</span> <span class="fu">c</span>(q103, age, age_3cat, q105, q114, q107, duree, q205, q219,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                constante, q211, groupe, anal, hla9, gono, chlam, gonochlam,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                cd4_nb, charge_virale_copies),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="fu">list</span>(</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="st">"continuous2"</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistic =</span> <span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="fu">c</span>(<span class="st">"{median} ({p25}, {p75})"</span>),</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> <span class="st">"column"</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">list</span>(</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>      q103 <span class="sc">~</span> <span class="st">"Nationality"</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">~</span> <span class="st">"Age in years"</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>      age_3cat <span class="sc">~</span> <span class="st">"Age in years (categories)"</span>,</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>      q105 <span class="sc">~</span> <span class="st">"Education"</span>,</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>      q114 <span class="sc">~</span> <span class="st">"Marital status"</span>,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>      q107 <span class="sc">~</span> <span class="st">"Place of work"</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>      duree <span class="sc">~</span> <span class="st">"Duration in sex work, months"</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>      q205 <span class="sc">~</span> <span class="st">"Number of clients, last 7 days of work"</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>      q219 <span class="sc">~</span> <span class="st">"Number of sexual intercourses, last 3 days"</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>      constante <span class="sc">~</span> <span class="st">"Consistent condom use with clients (last 7 days of work)"</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>      q211 <span class="sc">~</span> <span class="st">"Condom use with last client"</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>      groupe <span class="sc">~</span> <span class="st">"HIV/treatment status"</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>      anal <span class="sc">~</span> <span class="st">"Ever had anal sex (any partner)"</span>,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>      hla9 <span class="sc">~</span> <span class="st">"Ever had oral sex (any partner)"</span>,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>      gono <span class="sc">~</span> <span class="st">"NG prevalence"</span>,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>      chlam <span class="sc">~</span> <span class="st">"CT prevalence"</span>,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>      gonochlam <span class="sc">~</span> <span class="st">"NG/CT prevalence"</span>,</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>      cd4_nb <span class="sc">~</span> <span class="st">"CD4 cell count/mm³"</span>,</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>      charge_virale_copies <span class="sc">~</span> <span class="st">"Viral load"</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="fu">list</span>(</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">all_categorical</span>() <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing =</span> <span class="st">"no"</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_header</span>(<span class="at">label =</span> <span class="st">"**Variable**"</span>) <span class="sc">|&gt;</span>         <span class="co"># change label column header</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modify_caption</span>(<span class="st">"**Table 1. Baseline characteristics of 319 female sex workers,</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="st">                 Cotonou, Benin, 2008–2012**"</span>)   <span class="co"># add table name/title</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>des_table1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="wrsaxbdjjn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#wrsaxbdjjn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wrsaxbdjjn thead, #wrsaxbdjjn tbody, #wrsaxbdjjn tfoot, #wrsaxbdjjn tr, #wrsaxbdjjn td, #wrsaxbdjjn th {
  border-style: none;
}

#wrsaxbdjjn p {
  margin: 0;
  padding: 0;
}

#wrsaxbdjjn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wrsaxbdjjn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wrsaxbdjjn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wrsaxbdjjn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wrsaxbdjjn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wrsaxbdjjn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wrsaxbdjjn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wrsaxbdjjn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wrsaxbdjjn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wrsaxbdjjn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wrsaxbdjjn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wrsaxbdjjn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wrsaxbdjjn .gt_spanner_row {
  border-bottom-style: hidden;
}

#wrsaxbdjjn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wrsaxbdjjn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wrsaxbdjjn .gt_from_md > :first-child {
  margin-top: 0;
}

#wrsaxbdjjn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wrsaxbdjjn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wrsaxbdjjn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wrsaxbdjjn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wrsaxbdjjn .gt_row_group_first td {
  border-top-width: 2px;
}

#wrsaxbdjjn .gt_row_group_first th {
  border-top-width: 2px;
}

#wrsaxbdjjn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrsaxbdjjn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wrsaxbdjjn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wrsaxbdjjn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wrsaxbdjjn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrsaxbdjjn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wrsaxbdjjn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wrsaxbdjjn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wrsaxbdjjn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wrsaxbdjjn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wrsaxbdjjn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrsaxbdjjn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wrsaxbdjjn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wrsaxbdjjn .gt_left {
  text-align: left;
}

#wrsaxbdjjn .gt_center {
  text-align: center;
}

#wrsaxbdjjn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wrsaxbdjjn .gt_font_normal {
  font-weight: normal;
}

#wrsaxbdjjn .gt_font_bold {
  font-weight: bold;
}

#wrsaxbdjjn .gt_font_italic {
  font-style: italic;
}

#wrsaxbdjjn .gt_super {
  font-size: 65%;
}

#wrsaxbdjjn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wrsaxbdjjn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wrsaxbdjjn .gt_indent_1 {
  text-indent: 5px;
}

#wrsaxbdjjn .gt_indent_2 {
  text-indent: 10px;
}

#wrsaxbdjjn .gt_indent_3 {
  text-indent: 15px;
}

#wrsaxbdjjn .gt_indent_4 {
  text-indent: 20px;
}

#wrsaxbdjjn .gt_indent_5 {
  text-indent: 25px;
}

#wrsaxbdjjn .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#wrsaxbdjjn div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<caption><strong>Table 1. Baseline characteristics of 319 female sex workers, Cotonou, Benin, 2008–2012</strong></caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="gt_col_headings header">
<th id="label" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Variable</strong></th>
<th id="stat_0" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>N = 319</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label">Nationality</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Benin</td>
<td class="gt_row gt_center" headers="stat_0">123.0 (38.6%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Ghana</td>
<td class="gt_row gt_center" headers="stat_0">49.0 (15.4%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Nigeria</td>
<td class="gt_row gt_center" headers="stat_0">66.0 (20.7%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Togo</td>
<td class="gt_row gt_center" headers="stat_0">74.0 (23.2%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Others</td>
<td class="gt_row gt_center" headers="stat_0">7.0 (2.2%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Age in years</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Median (Q1, Q3)</td>
<td class="gt_row gt_center" headers="stat_0">34.00 (27.00, 41.00)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Age in years (categories)</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;18 - 24</td>
<td class="gt_row gt_center" headers="stat_0">48.0 (15.0%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;25 - 34</td>
<td class="gt_row gt_center" headers="stat_0">112.0 (35.1%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;&gt;=35</td>
<td class="gt_row gt_center" headers="stat_0">159.0 (49.8%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Education</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Not educated</td>
<td class="gt_row gt_center" headers="stat_0">107.0 (33.5%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Primary</td>
<td class="gt_row gt_center" headers="stat_0">126.0 (39.5%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Secondary</td>
<td class="gt_row gt_center" headers="stat_0">79.0 (24.8%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Postsecondary, university</td>
<td class="gt_row gt_center" headers="stat_0">7.0 (2.2%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Marital status</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Married</td>
<td class="gt_row gt_center" headers="stat_0">21.0 (6.6%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Single</td>
<td class="gt_row gt_center" headers="stat_0">102.0 (32.0%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Divorced</td>
<td class="gt_row gt_center" headers="stat_0">149.0 (46.7%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Widowed</td>
<td class="gt_row gt_center" headers="stat_0">47.0 (14.7%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Place of work</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Brothel</td>
<td class="gt_row gt_center" headers="stat_0">126.0 (39.6%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Home</td>
<td class="gt_row gt_center" headers="stat_0">24.0 (7.5%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Bars</td>
<td class="gt_row gt_center" headers="stat_0">37.0 (11.6%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Hotels</td>
<td class="gt_row gt_center" headers="stat_0">40.0 (12.6%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Street</td>
<td class="gt_row gt_center" headers="stat_0">76.0 (23.9%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Nightclub</td>
<td class="gt_row gt_center" headers="stat_0">6.0 (1.9%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Others</td>
<td class="gt_row gt_center" headers="stat_0">9.0 (2.8%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Duration in sex work, months</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Median (Q1, Q3)</td>
<td class="gt_row gt_center" headers="stat_0">36.00 (16.00, 60.00)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Number of clients, last 7 days of work</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Median (Q1, Q3)</td>
<td class="gt_row gt_center" headers="stat_0">13.00 (5.00, 26.00)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Number of sexual intercourses, last 3 days</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Median (Q1, Q3)</td>
<td class="gt_row gt_center" headers="stat_0">5.00 (1.00, 11.00)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Consistent condom use with clients (last 7 days of work)</td>
<td class="gt_row gt_center" headers="stat_0">246.0 (77.1%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Condom use with last client</td>
<td class="gt_row gt_center" headers="stat_0">279.0 (87.5%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">HIV/treatment status</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;HIV positive, treated</td>
<td class="gt_row gt_center" headers="stat_0">49.0 (15.4%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;HIV positive, not treated</td>
<td class="gt_row gt_center" headers="stat_0">82.0 (25.7%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;HIV negative</td>
<td class="gt_row gt_center" headers="stat_0">188.0 (58.9%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Ever had anal sex (any partner)</td>
<td class="gt_row gt_center" headers="stat_0">16.0 (5.0%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">Ever had oral sex (any partner)</td>
<td class="gt_row gt_center" headers="stat_0">62.0 (19.4%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">NG prevalence</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Positive</td>
<td class="gt_row gt_center" headers="stat_0">13.0 (4.1%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Negative</td>
<td class="gt_row gt_center" headers="stat_0">301.0 (94.4%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;No answer</td>
<td class="gt_row gt_center" headers="stat_0">5.0 (1.6%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">CT prevalence</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Positive</td>
<td class="gt_row gt_center" headers="stat_0">9.0 (2.8%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Negative</td>
<td class="gt_row gt_center" headers="stat_0">305.0 (95.6%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;No answer</td>
<td class="gt_row gt_center" headers="stat_0">5.0 (1.6%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">NG/CT prevalence</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Positive</td>
<td class="gt_row gt_center" headers="stat_0">21.0 (6.6%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Negative</td>
<td class="gt_row gt_center" headers="stat_0">293.0 (91.8%)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;No answer</td>
<td class="gt_row gt_center" headers="stat_0">5.0 (1.6%)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">CD4 cell count/mm³</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Median (Q1, Q3)</td>
<td class="gt_row gt_center" headers="stat_0">389.00 (214.50, 583.00)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">Viral load</td>
<td class="gt_row gt_center" headers="stat_0"><br>
</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Median (Q1, Q3)</td>
<td class="gt_row gt_center" headers="stat_0">8,153.00 (154.00, 31,321.00)</td>
</tr>
</tbody><tfoot>
<tr class="gt_footnotes odd">
<td colspan="2" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> n (%)</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Bảng kết quả có thể xuất ra file word
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>des_table1 <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">as_flex_table</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">save_as_docx</span>(<span class="at">path =</span> <span class="st">"Table 1. Baseline characteristics.docx"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>